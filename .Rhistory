stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type"))
View(stop_df)
stop_df <- group_by(stop_df, Incident.Number)
View(stop_df)
stop_df <- group_by(stop_df, stop_df$Incident.Number)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type"))
stop_df <- group_by(stop_df, stop_df$Incident.Number)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type"))
View(stop_df)
group_by(Incident.Number)
stop_df %>%
group_by(Incident.Number)
View(stop_df)
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other"))
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other"))
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other"))
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other"))
View(stop_df)
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
group_by(Call.Date.Time)
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split information about the individual from other information
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
arrange(Incident.Number)
#stop_df %>%
# group_by(Incident.Number)
View(stop_df)
na.omit(stop_df)
View(stop_df)
na.omit(stop_df)
stop_df <- na.omit(stop_df)
View(stop_df)
library(tidyr)
library(dplyr)
library(stringr)
library(lubridate)
library(ggplot2)
library(reshape)
#read data
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
arrange(Incident.Number)
stop_df <- na.omit(stop_df)
View(stop_df)
library(tidyr)
library(dplyr)
library(stringr)
library(lubridate)
library(ggplot2)
library(reshape)
#read data
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
arrange(Incident.Number)
stop_df <- na.omit(stop_df)
View(stop_df)
library(tidyr)
library(dplyr)
library(stringr)
library(lubridate)
library(ggplot2)
library(reshape)
#read data
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
arrange(Incident.Number)
stop_df <- na.omit(stop_df)
View(stop_df)
library(tidyr)
library(dplyr)
library(stringr)
library(lubridate)
library(ggplot2)
library(reshape)
#read data
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
arrange(Incident.Number)
#stop_df <- na.omit(stop_df)
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit() %>%
arrange(Incident.Number)
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit()
View(stop_df)
dispositions <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit()
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit() %>%
arrange(Incident.Number)
View(stop_df)
library(tidyr)
library(dplyr)
library(stringr)
library(lubridate)
library(ggplot2)
library(reshape)
#read data
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
#na.omit() %>%
arrange(Incident.Number)
View(stop_df)
op_df <- stop_df %>%
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit() %>%
arrange(Incident.Number)
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit()
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
arrange(Incident.Number)
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit() %>%
arrange(Incident.Number)
View(stop_df)
stop_df <- read.csv("~/Desktop/Berkeley_PD_-_Stop_Data.csv")
# Delete meaningless information and fix typos
stop_df <- stop_df %>%
mutate(Dispositions = as.character(stop_df$Dispositions)) %>%
mutate(Dispositions = str_replace(Dispositions, "zz do not use Assist", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "FA - TIGHT, ", "")) %>%
mutate(Dispositions = str_replace(Dispositions, "[0]{6}[1]?", "00000"))
# Split other information from information about the individual(s)
stop_df <- stop_df %>%
mutate(Other = str_replace_all(Dispositions, "[ ,]{0,2}[a-zA-Z0-9]{6}", "")) %>%
mutate(Other = str_replace_all(Other, "^[ ,]{0,4}", "")) %>%
mutate(Other = str_replace(Other, ",$", ""))
# Delete other information from Disposition
OtherInformation <- c( "^M$" = "", ", M$" = "", "M, P$" = "", "P[, ]{0,2}" = "", "AR[, ]{0,2}" = "", "IN[, ]{0,2}" = "", "FC[, ]{0,2}" = "", "CO[, ]{0,2}" = "", "MH[, ]{0,2}" = "", "TOW[, ]{0,2}" = "", "0[, ]{0,2}" = "", "00000[, ]{0,2}" = "")
stop_df <- stop_df %>%
mutate(Dispositions = str_replace_all(Dispositions, OtherInformation)) %>%
mutate(Dispositions = str_replace_all(Dispositions, "[, ]{0,2}$", ""))
stop_df <- separate(stop_df, Dispositions, into = c("Individual_1", "Individual_2", "Individual_3", "Individual_4", "Individual_5"), extra = "merge", fill = "right")
stop_df <- melt(stop_df, id = c("Incident.Number", "Call.Date.Time", "Location", "Incident.Type", "Other")) %>%
na.omit() %>%
arrange(Incident.Number)
View(stop_df)
stop_df <- rename(stop_df, "variable" = "Individual")
View(stop_df)
stop_df <- stop_df %>%
mutate(Race = substr(variable,1,1)) %>%
mutate(Gender = substr (variable,2,2)) %>%
mutate(AgeRange = substr (variable,3,3)) %>%
mutate(Reason =substr(variable,4,4)) %>%
mutate(Enforcement = substr(variable,5,5)) %>%
mutate(CarSearch = substr(variable,6,6))
View(stop_df)
stop_df <- stop_df %>%
mutate(Race = substr(value,1,1)) %>%
mutate(Gender = substr (value,2,2)) %>%
mutate(AgeRange = substr (value,3,3)) %>%
mutate(Reason =substr(value,4,4)) %>%
mutate(Enforcement = substr(value,5,5)) %>%
mutate(CarSearch = substr(value,6,6))
View(stop_df)
